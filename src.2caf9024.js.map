{"version":3,"sources":["src/mediaplayer.ts","src/plugins/autoPlay.ts","src/plugins/autoPause.ts","src/utils/growItem.ts","src/utils/iconsManager.ts","src/index.ts"],"names":[],"mappings":"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","file":"src.2caf9024.js","sourceRoot":"..","sourcesContent":["interface ConfigParam{\n\n   el: any;\n  //it's not necessary to have plugins \n   plugins?:Array<any>; \n}\n\n\nclass MediaPlayer {\n\n  media:HTMLMediaElement\n  plugins:Array<any>\n\n  constructor(config: ConfigParam) {\n\n\n    //\"this.\" will contain the value in the instance of MediaPLayer,\n    //the value of video\n\n\n    //config.el == video...so\n    //this.media == video\n    this.media = config.el;\n    this.plugins = config.plugins\n\n    //_initPlugins will make the plugins start running by calling it's function\n    this.initPlugins();\n  }\n\n  private initPlugins() {\n\n\n    //forEach will iterated in every plugin we added\n    this.plugins.forEach(plugin => {\n      //and \"plugin.start\" will run the plugin selected by the interation\n      //\"this\" will represent the MediaPlayer\n      plugin.start(this);\n      //in the first iteration the value of \"plugin.start(this)\" will be...\n      //autoplay.start(this)\n    });\n\n  }\n\n  muteControl() {\n    // if is called for the first time, this.media.muted will have a false value, so it's going to be converted to a true value  \n\n    this.media.muted = !this.media.muted;\n\n    // for tha second time is called, it will bring a true value, so it's going to be converted to a false value, so you can hear now the video\n  }\n\n  play() {\n    this.media.play();\n  }\n  pause() {\n\n    this.media.pause();\n  }\n\n  control() {\n    console.log(this.media.muted)\n    if(this.media.muted==false)this.media.paused ? this.play() : this.pause();\n\n\n  }\n}\n\n  \n  export default MediaPlayer","import MediaPlayer from \"../mediaplayer\"\n\nclass autoPlay{\n\n//this plugin needs to control the player so we need to give it access\n//\"player\" is the MediaPlayer from the mediaplayer.js file\n\nstart(player:MediaPlayer){\n    \n    if(!player.media.muted)player.media.muted=true\n\n//revusar esti\n  \n   player.play()\n    }\n}\nexport default autoPlay","import MediaPlayer from '../mediaplayer'\nimport {presentation__container__appear,playOrPause} from '../index'\nclass autoPause{\n    \n    private threshold:number\n    private insideThreshold: boolean | undefined\n    private pauseByVisibility=false\n\n    title: any\n    player:MediaPlayer\n\n    constructor(title: HTMLTitleElement){\n\n        this.threshold = 0.10\n        this.handlerIntersection = this.handlerIntersection.bind(this)\n        this.handleVisibility = this.handleVisibility.bind(this)\n        this.title=title\n        this.insideThreshold\n        this.pauseByVisibility=false\n\n    }\n\n    start(player: MediaPlayer){\n        \n        //saving the control of the player in a class instance \n        this.player=player\n\n        const observer= new IntersectionObserver(this.handlerIntersection, { threshold:this.threshold } )\n        \n        //observer need an element to observe, that's why \"player.media\" is sent as parameter  \n        // .observe is a native method of IntersectionObserver\n        observer.observe(player.media)\n\n        document.addEventListener(\"visibilitychange\",this.handleVisibility)\n\n    }\n\n    private handleVisibility(){\n\n       const isVisible=document.visibilityState==\"visible\"\n\n\n       if(isVisible){\n\n        \n        this.title[0].innerHTML=\"AlejandroTV\"\n\n        \n      \n\n        if(this.insideThreshold && !this.pauseByVisibility ){\n\n            this.player.play()\n            //by assigning false it will respect the user interaction \n            this.pauseByVisibility=false\n            }\n        }\n       else{\n        this.title[0].innerHTML=\"Hey!\"\n       \n        this.pauseByVisibility=true\n        this.player.pause() \n\n        if(this.player.media.classList.contains('render')){\n            presentation__container__appear()\n            playOrPause.remove('Pause')\n            playOrPause.add('Play')\n    \n        }\n        }\n\n        \n    }\n\n    \n    //entries ==all objects observed\n   private handlerIntersection(entries:IntersectionObserverEntry[]){\n     \n        const entry=entries[0]\n        \n        if(entry.intersectionRatio>=this.threshold){\n        this.insideThreshold=true    \n        this.player.play()\n        \n        }\n        else{\n            \n            this.insideThreshold=false\n            this.player.pause()\n          \n\n    }\n    }\n}\n\n\nexport default autoPause","import { main_image,video,item,button,presentation__container__appear } from \"../index\"\n\nconst presentationTextIntro:HTMLElement=document.querySelector(\".presentation__intro--text\")\n\n\nfunction removeMainImage():void {\n    main_image.classList.add(\"remove\")\n  \n  }\n  \n  \n\n function grow_item(e){\n\n  \n    if(video.classList.contains('render'))return\n    if(main_image.style.backgroundImage)return\n  \n    item.classList.add('display')\n  \n    //this will render once\n  \n    let style= e.target.currentStyle || window.getComputedStyle(e.target,null),\n    bi = style.backgroundImage.slice(4, -1).replace(/\"/g, \"\");\n    \n     main_image.style.backgroundImage=`linear-gradient(0deg, rgba(10,10,10,1) 0%, rgba(255,255,255,0) 100%), url(${bi})`\n     \n    main_image.style.animation = 'none';\n    main_image.offsetHeight; /* trigger reflow */\n    main_image.style.animation = null; \n  \n\n\n\n    button.classList.add(\"displayButton\")\n\n\n    setTimeout(()=>{ video.classList.add('render');\n                      removeMainImage()} ,3000)\n  \n      presentationTextIntro.style.display='none'\n      presentation__container__appear(true)\n      \n  }\n  export default grow_item","import {video,player,playOrPause,presentationContainer,presentation__container__appear} from '../index'\n\n\nconst presentationButtonIcon:HTMLElement=document.querySelector('.presentation__button--icon.State')\n\n\nfunction presentation__container__disappear(){\n\n \n\n  if(presentationContainer.classList.contains('disappear')!=true || presentationContainer.style.display != 'none'){\n  setTimeout(() =>{presentationContainer.style.display = 'none'},500,presentationContainer.classList.add('disappear'))\n}\n  }\n  \nfunction iconsManager(){\n\n    if(video.classList.contains('render') && player.media.muted===true){\n        presentation__container__disappear()\n    \n        presentationButtonIcon.classList.remove('Mute')\n        presentationButtonIcon.classList.add('unMute')\n        playOrPause.remove('Play')\n        playOrPause.add('Pause')\n\n        \n\n        return\n  }\n\n  if(playOrPause.contains('Play')){\n     \n      playOrPause.remove('Play')\n      playOrPause.add('Pause')\n   \n     \n\n      presentation__container__disappear()\n\n      \n    }else if(playOrPause.contains('Pause')){\n      playOrPause.remove('Pause')\n      playOrPause.add('Play')\n \n      presentation__container__appear()\n      \n    \n    }\n}\nexport default iconsManager","import MediaPlayer from './mediaplayer' \nimport autoPlay from './plugins/autoPlay'\nimport autoPause from './plugins/autoPause'\nimport grow_item from './utils/growItem'\nimport iconsManager from './utils/iconsManager'\nexport const buttonPlayOrPause:HTMLElement=document.querySelector('.presentation__button--icon')\nexport const item=document.querySelector(\".container__item\")\nexport const main_image:HTMLElement=document.querySelector(\".main_image\")\nexport const button:HTMLElement=document.querySelector('.presentation__button')\nexport const presentationContainer:HTMLElement=document.querySelector(\".presentation__container\")\nexport const playOrPause=buttonPlayOrPause.classList;\nexport const video=document.querySelector('video')\nexport let firstTimeVideoRender:Boolean=false;\n\n\n\n\n\n\nconst title:any=document.getElementsByTagName(\"title\");\n\n\nitem.addEventListener('mouseover',grow_item)\nitem.addEventListener('mouseout',remove_item)\nitem.addEventListener('click', show_item)\n\n\n\nfunction show_item(){\n\n  video.classList.add('render')\n}\n\n\nexport function presentation__container__appear(firstTime=false){\n   if(firstTime){presentationContainer.style.display = 'block'}\n\n  if(presentationContainer.classList.contains('disappear') || presentationContainer.style.display==='none' ){\n  setTimeout(() =>{presentationContainer.style.display = 'block'},0,  presentationContainer.classList.remove('disappear'))\n}\n}\n\n\n\n\n\nfunction remove_item(){\n  document.querySelector(\".container__item\").classList.remove('display')\n  \n}\n\n\nvideo.addEventListener('ended',()=>{\n  \n  player.media.muted =true\n  \n  playOrPause.remove('Pause')\n\n  presentation__container__appear()\n\n  playOrPause.add('Play')\n\nsetTimeout(()=>{ \n                video.classList.remove('disappear')\n                video.classList.remove('render')\n              \n              \n              },1000,\n                video.classList.add('disappear'),\n                main_image.classList.remove('remove')\n\n                )\n\n  }\n)\n\n  //el:video contains the original video\n\n export const player=new MediaPlayer({\n    \n    //all of these are elements of the MediaPlayer, also they are hosted in mediaplayer.js file\n\n    // objects destructuring \n    el:video,\n\n    //  Here we will pass all the plugins this project has, for example, here we are passing autoplay in pluging's array \n    plugins:[new autoPlay(), new autoPause(title)] \n\n  })\nbutton.onclick=()=>{\n\n\n\n  show_item();\n\n\n  iconsManager()\n  player.media.muted ? player.muteControl() : player.control();\n\n\n\n\n}\n\n\n// if the navigator uses \"Service Worker\" then it will use it\nif('serviceWorker' in navigator){\n\n  navigator.serviceWorker.register('../sw.js').catch(error=>console.log(error.message))\n\n}"]}